@page "/admin"
@using DragonFruit.Sakura.Network
@layout AdminLayout

<MudContainer MaxWidth="MaxWidth.Large">
    <MudGrid>
        <MudItem xs="4">
            <MudSelect T="AppFeatures" @bind-Value="SelectedAppFeature" Label="Feature" Variant="Variant.Outlined">
                @foreach (var feature in Enum.GetValues<AppFeatures>())
                {
                    <MudSelectItem Value="feature">@feature.ToString()</MudSelectItem>
                }
            </MudSelect>
        </MudItem>

        <MudItem xs="8">
            <MudSelect T="ApiAppInfo" @bind-Value="SelectedApp" Label="App" Variant="Variant.Outlined">
                @foreach (var app in Apps?.Where(x => x.Features.HasFlag(SelectedAppFeature)) ?? Enumerable.Empty<ApiAppInfo>())
                {
                    <MudSelectItem Value="app">@app.Name</MudSelectItem>
                }
            </MudSelect>
        </MudItem>
    </MudGrid>

    <div class="mt-4">
        @if (SelectedApp != null)
        {
            switch (SelectedAppFeature)
            {
                case AppFeatures.Changelogs:
                    <Changelogs TargetApp="SelectedApp"/>
                    break;
            }
        }
    </div>
</MudContainer>