@inherits LayoutComponentBase
@layout DefaultLayout

<SakuraJumbotron>
    <AuthorizeView>
        <Authorized>
            @Body
        </Authorized>
        <Authorizing>
            <MudStack Spacing="2" AlignItems="AlignItems.Center" Justify="Justify.Center">
                <MudIcon Size="Size.Large" Icon="@Icons.Rounded.Badge"/>
                <MudText Typo="Typo.h6">Checking Authentication Status...</MudText>
            </MudStack>
        </Authorizing>
        <NotAuthorized>
            <MudStack Spacing="2" AlignItems="AlignItems.Center" Justify="Justify.Center">
                <MudIcon Size="Size.Large" Icon="@Icons.Rounded.Badge"/>
                <MudText Typo="Typo.h6">Authentication Required</MudText>
                <MudText>This is an internal page that requires a valid login to access</MudText>

                <MudButton Class="mt-4"
                           Color="Color.Secondary"
                           OnClick="RedirectToLoginPage"
                           StartIcon="@Icons.Rounded.Fingerprint">
                    Login via DragonFruit
                </MudButton>
            </MudStack>
        </NotAuthorized>
    </AuthorizeView>
</SakuraJumbotron>

@code {

    [Inject]
    private NavigationManager Navigation { get; set; }

    private void RedirectToLoginPage()
    {
        Navigation.NavigateTo($"/auth/login?returnUrl={Uri.EscapeDataString(Navigation.Uri)}");
    }

}